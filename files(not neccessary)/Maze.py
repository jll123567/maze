# import
import turtle
import tkinter as tk
from tkinter import ttk

# screen setup
window = turtle.Screen()
window.setup(640, 400, None, None)

# player setup
player = turtle.Turtle(shape="turtle")
player.color("green", "green")
player.pu()
player.ht()
player.speed(0)
player.goto(290, -30)
player.left(180)

# goal setup
goal = turtle.Turtle(shape="turtle")
goal.color("red", "red")
goal.pu()
goal.ht()
goal.speed(0)
goal.goto(290, 30)
goal.left(180)


# draw maze instructions
def drawMaze():
    pen = turtle.Turtle()
    pen.ht()
    pen.pu()
    pen.speed(0)
    pen.goto(-300, 180)
    pen.pd()
    pen.goto(-300, -180)
    pen.pu()
    pen.goto(-280, 160)
    pen.pd()
    pen.goto(-280, 80)
    pen.pu()
    pen.goto(-280, 40)
    pen.pd()
    pen.goto(-280, -60)
    pen.pu()
    pen.goto(-280, -80)
    pen.pd()
    pen.goto(-280, -120)
    pen.pu()
    pen.goto(-260, 140)
    pen.pd()
    pen.goto(-260, 100)
    pen.pu()
    pen.goto(-260, 20)
    pen.pd()
    pen.goto(-260, -60)
    pen.pu()
    pen.goto(-260, -80)
    pen.pd()
    pen.goto(-260, -180)
    pen.pu()
    pen.goto(-240, 0)
    pen.pd()
    pen.goto(-240, -60)
    pen.pu()
    pen.goto(-240, -40)
    pen.pd()
    pen.goto(-240, -60)
    pen.pu()
    pen.goto(-240, -80)
    pen.pd()
    pen.goto(-240, -100)
    pen.pu()
    pen.goto(-240, -120)
    pen.pd()
    pen.goto(-240, -160)
    pen.pu()
    pen.goto(-220, -20)
    pen.pd()
    pen.goto(-220, -60)
    pen.pu()
    pen.goto(-220, -80)
    pen.pd()
    pen.goto(-220, -100)
    pen.pu()
    pen.goto(-220, -120)
    pen.pd()
    pen.goto(-220, -160)
    pen.pu()
    pen.goto(-200, 0)
    pen.pd()
    pen.goto(-200, -160)
    pen.pu()
    pen.goto(-180, 40)
    pen.pd()
    pen.goto(-180, 20)
    pen.pu()
    pen.goto(-180, 20)
    pen.pu()
    pen.goto(-180, 0)
    pen.pd()
    pen.goto(-180, -160)
    pen.pu()
    pen.goto(-160, 60)
    pen.pd()
    pen.goto(-160, 40)
    pen.pu()
    pen.goto(-160, 0)
    pen.pd()
    pen.goto(-160, -60)
    pen.pu()
    pen.goto(-160, -80)
    pen.pd()
    pen.goto(-160, -100)
    pen.pu()
    pen.goto(-160, -120)
    pen.pd()
    pen.goto(-160, -160)
    pen.pu()
    pen.goto(-140, 40)
    pen.pd()
    pen.goto(-140, 20)
    pen.pu()
    pen.goto(-140, -40)
    pen.pd()
    pen.goto(-140, -60)
    pen.pu()
    pen.goto(-140, -100)
    pen.pd()
    pen.goto(-140, -180)
    pen.pu()
    pen.goto(-120, 60)
    pen.pd()
    pen.goto(-120, 40)
    pen.pu()
    pen.goto(-120, -20)
    pen.pd()
    pen.goto(-120, -40)
    pen.pu()
    pen.goto(-120, -120)
    pen.pd()
    pen.goto(-120, -160)
    pen.pu()
    pen.goto(-100, 120)
    pen.pd()
    pen.goto(-100, 100)
    pen.pu()
    pen.goto(-100, 40)
    pen.pd()
    pen.goto(-100, 20)
    pen.pu()
    pen.goto(-100, -20)
    pen.pd()
    pen.goto(-100, -40)
    pen.pu()
    pen.goto(-80, 140)
    pen.pd()
    pen.goto(-80, 80)
    pen.pu()
    pen.goto(-80, 60)
    pen.pd()
    pen.goto(-80, 40)
    pen.pu()
    pen.goto(-80, 0)
    pen.pd()
    pen.goto(-80, -60)
    pen.pu()
    pen.goto(-60, 120)
    pen.pd()
    pen.goto(-60, 60)
    pen.pu()
    pen.goto(-60, -20)
    pen.pd()
    pen.goto(-60, -40)
    pen.pu()
    pen.goto(-40, 180)
    pen.pd()
    pen.goto(-40, 120)
    pen.pu()
    pen.goto(-40, 100)
    pen.pd()
    pen.goto(-40, 40)
    pen.pu()
    pen.goto(-40, -20)
    pen.pd()
    pen.goto(-40, -40)
    pen.pu()
    pen.goto(-20, 160)
    pen.pd()
    pen.goto(-20, 120)
    pen.pu()
    pen.goto(-20, 80)
    pen.pd()
    pen.goto(-20, 20)
    pen.pu()
    pen.goto(-20, -20)
    pen.pd()
    pen.goto(-20, -60)
    pen.pu()
    pen.goto(0, 160)
    pen.pd()
    pen.goto(0, 120)
    pen.pu()
    pen.goto(0, 80)
    pen.pd()
    pen.goto(0, 40)
    pen.pu()
    pen.goto(0, 0)
    pen.pd()
    pen.goto(0, -60)
    pen.pu()
    pen.goto(20, 160)
    pen.pd()
    pen.goto(20, 120)
    pen.pu()
    pen.goto(20, 0)
    pen.pd()
    pen.goto(20, -60)
    pen.pu()
    pen.goto(20, -80)
    pen.pd()
    pen.goto(20, -100)
    pen.pu()
    pen.goto(40, 160)
    pen.pd()
    pen.goto(40, 100)
    pen.pu()
    pen.goto(40, -20)
    pen.pd()
    pen.goto(40, -80)
    pen.pu()
    pen.goto(40, -140)
    pen.pd()
    pen.goto(40, -160)
    pen.pu()
    pen.goto(60, 180)
    pen.pd()
    pen.goto(60, 80)
    pen.pu()
    pen.goto(60, -20)
    pen.pd()
    pen.goto(60, -100)
    pen.pu()
    pen.goto(60, -120)
    pen.pd()
    pen.goto(60, -140)
    pen.pu()
    pen.goto(80, 160)
    pen.pd()
    pen.goto(80, 60)
    pen.pu()
    pen.goto(80, -20)
    pen.pd()
    pen.goto(80, -120)
    pen.pu()
    pen.goto(100, 60)
    pen.pd()
    pen.goto(100, 40)
    pen.pu()
    pen.goto(100, -40)
    pen.pd()
    pen.goto(100, -180)
    pen.pu()
    pen.goto(120, 40)
    pen.pd()
    pen.goto(120, 20)
    pen.pu()
    pen.goto(120, 0)
    pen.pd()
    pen.goto(120, -20)
    pen.pu()
    pen.goto(120, -60)
    pen.pd()
    pen.goto(120, -100)
    pen.pu()
    pen.goto(120, -120)
    pen.pd()
    pen.goto(120, -160)
    pen.pu()
    pen.goto(140, 20)
    pen.pd()
    pen.goto(140, -20)
    pen.pu()
    pen.goto(140, -60)
    pen.pd()
    pen.goto(140, -80)
    pen.pu()
    pen.goto(160, -40)
    pen.pd()
    pen.goto(160, -60)
    pen.pu()
    pen.goto(180, 0)
    pen.pd()
    pen.goto(180, -60)
    pen.pu()
    pen.goto(180, -140)
    pen.pd()
    pen.goto(180, -160)
    pen.pu()
    pen.goto(200, -20)
    pen.pd()
    pen.goto(200, -80)
    pen.pu()
    pen.goto(200, -100)
    pen.pd()
    pen.goto(200, -120)
    pen.pu()
    pen.goto(220, 20)
    pen.pd()
    pen.goto(220, 40)
    pen.pu()
    pen.goto(220, -40)
    pen.pd()
    pen.goto(220, -80)
    pen.pu()
    pen.goto(220, -100)
    pen.pd()
    pen.goto(220, -180)
    pen.pu()
    pen.goto(240, 80)
    pen.pd()
    pen.goto(240, 40)
    pen.pu()
    pen.goto(240, 20)
    pen.pd()
    pen.goto(240, 0)
    pen.pu()
    pen.goto(240, -120)
    pen.pd()
    pen.goto(240, -180)
    pen.pu()
    pen.goto(260, 0)
    pen.pd()
    pen.goto(260, -20)
    pen.pu()
    pen.goto(260, -60)
    pen.pd()
    pen.goto(260, -80)
    pen.pu()
    pen.goto(260, -100)
    pen.pd()
    pen.goto(260, -160)
    pen.pu()
    pen.goto(280, 180)
    pen.pd()
    pen.goto(280, 40)
    pen.pu()
    pen.goto(280, 20)
    pen.pd()
    pen.goto(280, -20)
    pen.pu()
    pen.goto(280, -40)
    pen.pd()
    pen.goto(280, -180)
    pen.pu()
    pen.goto(300, 40)
    pen.pd()
    pen.goto(300, 20)
    pen.pu()
    pen.goto(300, -20)
    pen.pd()
    pen.goto(300, -40)
    pen.pu()
    pen.goto(-300, 180)
    pen.pd()
    pen.goto(280, 180)
    pen.pu()
    pen.goto(-300, -180)
    pen.pd()
    pen.goto(280, -180)
    pen.pu()
    pen.goto(-280, 160)
    pen.pd()
    pen.goto(-40, 160)
    pen.pu()
    pen.goto(-20, 160)
    pen.pd()
    pen.goto(0, 160)
    pen.pu()
    pen.goto(80, 160)
    pen.pd()
    pen.goto(260, 160)
    pen.pu()
    pen.goto(-260, 140)
    pen.pd()
    pen.goto(-60, 140)
    pen.pu()
    pen.goto(0, 140)
    pen.pd()
    pen.goto(20, 140)
    pen.pu()
    pen.goto(100, 140)
    pen.pd()
    pen.goto(280, 140)
    pen.pu()
    pen.goto(-240, 120)
    pen.pd()
    pen.goto(-100, 120)
    pen.pu()
    pen.goto(-60, 120)
    pen.pd()
    pen.goto(-20, 120)
    pen.pu()
    pen.goto(80, 120)
    pen.pd()
    pen.goto(260, 120)
    pen.pu()
    pen.goto(-260, 100)
    pen.pd()
    pen.goto(-100, 100)
    pen.pu()
    pen.goto(-40, 100)
    pen.pd()
    pen.goto(40, 100)
    pen.pu()
    pen.goto(100, 100)
    pen.pd()
    pen.goto(280, 100)
    pen.pu()
    pen.goto(-280, 80)
    pen.pd()
    pen.goto(-80, 80)
    pen.pu()
    pen.goto(-40, 80)
    pen.pd()
    pen.goto(-20, 80)
    pen.pu()
    pen.goto(0, 80)
    pen.pd()
    pen.goto(60, 80)
    pen.pu()
    pen.goto(80, 80)
    pen.pd()
    pen.goto(240, 80)
    pen.pu()
    pen.goto(-300, 60)
    pen.pd()
    pen.goto(-60, 60)
    pen.pu()
    pen.goto(20, 60)
    pen.pd()
    pen.goto(80, 60)
    pen.pu()
    pen.goto(100, 60)
    pen.pd()
    pen.goto(220, 60)
    pen.pu()
    pen.goto(-280, 40)
    pen.pd()
    pen.goto(-180, 40)
    pen.pu()
    pen.goto(0, 40)
    pen.pd()
    pen.goto(100, 40)
    pen.pu()
    pen.goto(120, 40)
    pen.pd()
    pen.goto(200, 40)
    pen.pu()
    pen.goto(220, 40)
    pen.pd()
    pen.goto(260, 40)
    pen.pu()
    pen.goto(280, 40)
    pen.pd()
    pen.goto(300, 40)
    pen.pu()
    pen.goto(-260, 20)
    pen.pd()
    pen.goto(300, 20)
    pen.pu()
    pen.goto(-220, 0)
    pen.pd()
    pen.goto(-200, 0)
    pen.pu()
    pen.goto(-180, 0)
    pen.pd()
    pen.goto(-100, 0)
    pen.pu()
    pen.goto(-80, 0)
    pen.pd()
    pen.goto(-20, 0)
    pen.pu()
    pen.goto(20, 0)
    pen.pd()
    pen.goto(120, 0)
    pen.pu()
    pen.goto(180, 0)
    pen.pd()
    pen.goto(220, 0)
    pen.pu()
    pen.goto(240, 0)
    pen.pd()
    pen.goto(260, 0)
    pen.pu()
    pen.goto(-260, -20)
    pen.pd()
    pen.goto(-240, -20)
    pen.pu()
    pen.goto(-120, -20)
    pen.pd()
    pen.goto(-100, -20)
    pen.pu()
    pen.goto(-60, -20)
    pen.pd()
    pen.goto(-40, -20)
    pen.pu()
    pen.goto(40, -20)
    pen.pd()
    pen.goto(60, -20)
    pen.pu()
    pen.goto(80, -20)
    pen.pd()
    pen.goto(140, -20)
    pen.pu()
    pen.goto(200, -20)
    pen.pd()
    pen.goto(240, -20)
    pen.pu()
    pen.goto(260, -20)
    pen.pd()
    pen.goto(300, -20)
    pen.pu()
    pen.goto(-240, -40)
    pen.pd()
    pen.goto(-220, -40)
    pen.pu()
    pen.goto(-140, -40)
    pen.pd()
    pen.goto(-120, -40)
    pen.pu()
    pen.goto(-60, -40)
    pen.pd()
    pen.goto(-40, -40)
    pen.pu()
    pen.goto(100, -40)
    pen.pd()
    pen.goto(160, -40)
    pen.pu()
    pen.goto(220, -40)
    pen.pd()
    pen.goto(300, -40)
    pen.pu()
    pen.goto(-280, -60)
    pen.pd()
    pen.goto(-260, -60)
    pen.pu()
    pen.goto(-160, -60)
    pen.pd()
    pen.goto(-60, -60)
    pen.pu()
    pen.goto(0, -60)
    pen.pd()
    pen.goto(20, -60)
    pen.pu()
    pen.goto(120, -60)
    pen.pd()
    pen.goto(140, -60)
    pen.pu()
    pen.goto(160, -60)
    pen.pd()
    pen.goto(180, -60)
    pen.pu()
    pen.goto(240, -60)
    pen.pd()
    pen.goto(260, -60)
    pen.pu()
    pen.goto(-260, -80)
    pen.pd()
    pen.goto(-220, -80)
    pen.pu()
    pen.goto(-180, -80)
    pen.pd()
    pen.goto(-140, -80)
    pen.pu()
    pen.goto(-120, -80)
    pen.pd()
    pen.goto(20, -80)
    pen.pu()
    pen.goto(140, -80)
    pen.pd()
    pen.goto(200, -80)
    pen.pu()
    pen.goto(220, -80)
    pen.pd()
    pen.goto(260, -80)
    pen.pu()
    pen.goto(-140, -100)
    pen.pd()
    pen.goto(60, -100)
    pen.pu()
    pen.goto(120, -100)
    pen.pd()
    pen.goto(200, -100)
    pen.pu()
    pen.goto(220, -100)
    pen.pd()
    pen.goto(260, -100)
    pen.pu()
    pen.goto(-300, -120)
    pen.pd()
    pen.goto(-260, -120)
    pen.pu()
    pen.goto(-160, -120)
    pen.pd()
    pen.goto(-140, -120)
    pen.pu()
    pen.goto(-120, -120)
    pen.pd()
    pen.goto(60, -120)
    pen.pu()
    pen.goto(120, -120)
    pen.pd()
    pen.goto(200, -120)
    pen.pu()
    pen.goto(-100, -140)
    pen.pd()
    pen.goto(40, -140)
    pen.pu()
    pen.goto(60, -140)
    pen.pd()
    pen.goto(120, -140)
    pen.pu()
    pen.goto(140, -140)
    pen.pd()
    pen.goto(200, -140)
    pen.pu()
    pen.goto(-240, -160)
    pen.pd()
    pen.goto(-200, -160)
    pen.pu()
    pen.goto(-180, -160)
    pen.pd()
    pen.goto(-160, -160)
    pen.pu()
    pen.goto(-120, -160)
    pen.pd()
    pen.goto(80, -160)
    pen.pu()
    pen.goto(120, -160)
    pen.pd()
    pen.goto(180, -160)
    pen.pu()


# movement and player/goal ready
def play():
    # key binds
    def up():
        player.forward(20)

    def left():
        player.speed(0)
        player.left(90)

    def right():
        player.speed(0)
        player.right(90)

    # show goal
    goal.st()

    # update player
    player.st()
    player.pd()
    player.speed(2)

    # Key events
    window.onkey(up, "Up")
    window.onkey(left, "Left")
    window.onkey(right, "Right")
    window.listen()


# Font Def for popup
NORM_FONT = ("Verdana", 12)


# popup function
def popupmsg(msg):
    popup = tk.Tk()
    sw = popup.winfo_screenwidth()
    sh = popup.winfo_screenheight()
    popup.wm_title("You Won!")
    # centering help from <https://stackoverflow.com/questions/14910858/how-to-specify-where-a-tkinter-window-opens
    # /14912644>
    popup.geometry('%dx%d+%d+%d' % (100, 80, ((sw / 2) - 50), ((sh / 2) - 40)))
    label = ttk.Label(popup, text=str(msg), font=("Verdana", 12))
    label.pack(side="top", fill="x", pady=10)
    b1 = ttk.Button(popup, text="Hurray", command=popup.quit)
    b1.pack()

    # close window
    window.bye()

    # popup mainloop
    popup.mainloop()


# draw the maze
drawMaze()

# game loop
while True:

    # play
    play()
    # Debug
    # print(player.pos(), " : ", goal.pos(), " :" + str(str(player.pos()) == str(goal.pos())))

    # game win
    if str(player.pos()) == str(goal.pos()):
        popupmsg("   You Won")
